<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>계정 설정 - Tulipmetric</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1 { font-size: 1.5rem; font-weight: 500; line-height: 1.5; }
    h2 { font-size: 1.25rem; font-weight: 500; line-height: 1.5; }
    h3 { font-size: 1.125rem; font-weight: 500; line-height: 1.5; }
    h4 { font-size: 1rem; font-weight: 500; line-height: 1.5; }
    label, button { font-size: 1rem; font-weight: 500; line-height: 1.5; }
    input { font-size: 1rem; font-weight: 400; line-height: 1.5; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
<!-- Header -->
<div th:replace="~{fragments/basicheader :: basicheader-fragment}"></div>

  <!-- Main Content -->
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Breadcrumb -->
    <div class="mb-6">
      <nav class="flex items-center gap-2 text-sm">
        <a href="/mypage" class="text-slate-600 hover:text-slate-900 transition-colors">마이페이지</a>
        <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
        <span class="text-slate-900">계정 설정</span>
      </nav>
    </div>

    <!-- Page Header -->
    <div class="mb-8">
      <div class="flex items-center gap-3 mb-3">
        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center">
          <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
        </div>
        <div>
          <h2 class="text-slate-900 text-3xl">계정 설정</h2>
          <p class="text-slate-600 mt-1">프로필 및 계정 정보를 관리하세요</p>
        </div>
      </div>
    </div>

    <!-- Profile Settings -->
    <form action="/editprofile" method="post" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6">
      <h3 class="text-slate-900 mb-6">프로필 정보</h3>

      <div class="space-y-6">
        <div>
          <label for="nickname" class="block text-sm text-slate-700 mb-2">별명</label>
          <input 
            type="text" 
            id="nickname"
            name="nickname"
            minlength="2"
            maxlength="30"
            required
            th:placeholder="${member.nickname}"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          />
        </div>

        <div>
          <label for="email" class="block text-sm text-slate-700 mb-2">이메일</label>
          <input 
            type="email" 
            id="email"
            name="email"
            required
            th:placeholder="${member.email}"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          />
        </div>

        <div class="flex justify-end">
          <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            변경사항 저장
          </button>
        </div>
      </div>
    </form>

    <!-- Password Settings -->
    <form action="/editpassword" method="post" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6" onsubmit="return handlePasswordChange(event)">
      <h3 class="text-slate-900 mb-6">비밀번호 변경</h3>
        <div class="space-y-6">
          <div>
            <label for="currentPassword" class="block text-sm text-slate-700 mb-2">현재 비밀번호</label>
            <input
              type="password"
              id="currentPassword"
              name="currentPassword"
              minlength="8"
              required
              placeholder="현재 비밀번호를 입력하세요"
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          </div>

          <div>
            <label for="newPassword" class="block text-sm text-slate-700 mb-2">새 비밀번호</label>
            <input
              type="password"
              id="newPassword"
              name="newPassword"
              minlength="8"
              required
              placeholder="새 비밀번호를 입력하세요"
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
            <p class="text-sm text-slate-500 mt-2">최소 8자 이상, 영문/숫자/특수문자 포함</p>
          </div>

          <div>
            <label for="confirmPassword" class="block text-sm text-slate-700 mb-2">비밀번호 확인</label>
            <input
              type="password"
              id="confirmPassword"
              minlength="8"
              required
              placeholder="새 비밀번호를 다시 입력하세요"
              class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
            <p id="pwMsg" class="text-sm mt-2"></p>
          </div>

          <div class="flex justify-end">
            <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
              비밀번호 변경
            </button>
          </div>
        </div>
    </form>



    <!-- Danger Zone -->
    <form action="/deletprofile" method="post" class="bg-white rounded-xl shadow-sm border border-red-200 p-6">
      <h3 class="text-red-600 mb-4">위험 구역</h3>
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
        <p class="text-sm text-red-700">계정을 삭제하면 모든 데이터가 영구적으로 삭제되며 복구할 수 없습니다.</p>
      </div>
      <button type="submit" class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
        계정 삭제
      </button>
    </form>
  </div>
</body>
<script>
  function handlePasswordChange(event) {
    const newPassword = document.getElementById('newPassword');
    const confirmPassword = document.getElementById('confirmPassword');
    const message = document.getElementById('pwMsg');

    if (!newPassword || !confirmPassword || !message) return true;

    if (newPassword.value !== confirmPassword.value) {
      event.preventDefault();
      message.textContent = '새 비밀번호와 비밀번호 확인이 일치하지 않습니다.';
      message.className = 'text-sm mt-2 text-red-600';
      confirmPassword.classList.add('border-red-400', 'focus:ring-red-500');
      newPassword.classList.add('border-red-400', 'focus:ring-red-500');
      return false;
    }

    message.textContent = '';
    confirmPassword.classList.remove('border-red-400', 'focus:ring-red-500');
    newPassword.classList.remove('border-red-400', 'focus:ring-red-500');
    return true;
  }
</script>
</html>
